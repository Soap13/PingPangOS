/*  *c语言和汇编的联合测试 * *王征 2014-02-03 *///字符串输出void put_str(char *message);void put_str(char *message);void put_int(int number);void put_intln(int number);void put_hex(int number);void put_hexln(int number);//=========================================void Init8259A(); //安装中断void make_idt_description(unsigned int addr,unsigned int gdt_select,unsigned int attr,unsigned int index);//中断返回处理void interrupt_return(unsigned int code_addr,unsigned int code_sel,unsigned int flage,unsigned int stack_addr,unsigned stack_sel);//键盘中断的安装void key_interrupt(); //键盘中断//系统终止掉void exit();//中断//void normal_interrupt();//==========================================/* *第一次进入的时候的提示信息 */void show_title(){     put_str("Welcom to the os world!\r\n");}/* *普通的中断异常处理 *没有中断码 */void normal_interrupt(unsigned int code_addr,unsigned int code_sel,unsigned int flage,unsigned int stack_addr,unsigned stack_sel){       put_strln("The error message:\r\n");	    put_hexln(code_addr);    put_hexln(code_sel);	put_hexln(flage);	put_hexln(stack_addr);	put_hexln(stack_sel);          put_str("The normal interrupt is triggered! The system will stop!\r\n");    exit();}/* *键盘中断的安装 */void init_key_interrupt(){    put_str("Key interrupt init is start!\r\n");	 make_idt_description((unsigned int)key_interrupt,(unsigned int)0x0028,(unsigned int)0x8E00,(unsigned int)0x21);	put_str("Key interrupt init is start!\r\n");} /* *实例化8259A芯片的，并且安装idt */void init_idt(){     put_str("Init the interrupt and exception starting!\r\n");	 //1.实例化芯片 	 Init8259A();	 //2.全部安装通用中断     int count=0;	 for(;count<250;count++){	  make_idt_description((unsigned int)normal_interrupt,(unsigned int)0x0028,(unsigned int)0x8E00,(unsigned int)count);	 }	 put_str("Init the interrupt and exception over!\r\n");	 //3.键盘的安装 	 init_key_interrupt(); } 